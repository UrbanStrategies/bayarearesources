<script>
  $(function() {
    $(':checkbox').click(function() {
      var ID = this.id.split('_')[1];
      var checked_ids = new Array();
      $(':checkbox').each(function(i, value) { 
        if($('#' + value.getAttribute('id')).is(':checked')) {
          checked_ids.push(value.getAttribute('id'));
        } 
      });
      $.unique(checked_ids);
      
      if(checked_ids.length === 0) {
        $('.location_listing').show();        
      } else {
        $('.location_listing').hide();
        $('.location_listing').each(function(a, listing) {
          var listing_id_match = true;
          var listing_ids = listing.getAttribute('class');
          $.each(checked_ids, function(b, id) {
            if(listing_ids.indexOf(id) === -1) {
              listing_id_match = false;
            }
          });
        
          if(listing_id_match == true) {
            $('#'+listing.getAttribute('id')).show();
          }
        });
      }
    });
  });
</script>